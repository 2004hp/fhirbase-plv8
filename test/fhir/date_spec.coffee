date = require('../../src/fhir/date')
assert = require('assert')

specs = [
  ['2010', '[2010-01-01,2011-01-01)']
  ['2010-03', '[2010-03-01,2010-04-01)']
  ['2010-09', '[2010-09-01,2010-10-01)']
  ['2010-12', '[2010-12-01,2011-01-01)']
  ['2010-03-05', '[2010-03-05,2010-03-05T23:59:59.99999]']
  ['2010-03-05T10', '[2010-03-05T10:00,2010-03-05T10:59:59.99999]']
  ['2010-03-05T23', '[2010-03-05T23:00,2010-03-05T23:59:59.99999]']
  ['2010-03-05T23:50', '[2010-03-05T23:50,2010-03-05T23:50:59.99999]']
  ['2010-03-05T23:50:30', '[2010-03-05T23:50:30,2010-03-05T23:50:30.99999]']
]

describe "Test fhir.date/to_range", ()->
  for [k,v] in specs
    it "#{k} -> #{v}", ()->
      assert.equal(date.to_range(k), v)

      d1 = new Date()
      for _ in [0..100000]
        date.to_range(k)
      d2 = new Date()

      console.log "#{k} Time "+(d2-d1)+"ms"

