---
fixtures:
  Patient:
    - resourceType: Patient
      id: bob-the-patient
      name:
        - given: ["Bob"]

examples:
  - desc: simple transaction creating a patient
    before:
      - search:
          resourceType: Patient
          queryString: name=john
        total: 0

      - search:
          resourceType: Patient
          queryString: name=Bob
        total: 1


    transaction:
      entry:
        - request:
            url: /Patient
            method: POST
          resource:
            resourceType: Patient
            name:
              - given: ["John"]

        - request:
            url: /Patient/bob-the-patient
            method: DELETE

    after:
      - search:
          resourceType: Patient
          queryString: name=john
        total: 1

      - search:
          resourceType: Patient
          queryString: name=Bob
        total: 0
